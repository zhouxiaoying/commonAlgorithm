<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>    
        // //比较两个版本的大小
        // function compareVersion(v1,v2){
        //     if(v1 === v2){
        //         return 0;
        //         //相等
        //     }
        //     let v1arrs = v1.split('.').map(v=>parseInt(v));
        //     let v2arrs = v2.split('.').map(v=>parseInt(v));
        //     let length = Math.min(v1arrs.length,v2arrs.length);
        //     for(let i =0;i<length;i++){
        //         if(v1arrs[i]>v2arrs[i]){
        //             return 1;
        //         }else if(v1arrs[i]<v2arrs[i]){
        //             return -1;
        //         }
        //     }
        //     if(length == v1arrs.length){
        //         return -1;
        //     }else{
        //         return 1;
        //     }
        // }
        // let v1 = '1.12';
        // let v2 = '1.12.0';
        // // console.log(compareVersion(v1,v2));
        // //快排  O(nlogn) O(nlogn)
        function quickSort(arr){
            if (arr.length <= 1) { return arr; }
            //首先middle
            let middleIndex = Math.floor(arr.length/2);
            let middle = arr.splice(middleIndex, 1)[0];
            // console.log(middle);
            //遍历 组成larr rarr
            let larr = [];
            let rarr = [];
            for(let i = 0,len = arr.length;i<len;i++){
                if(arr[i]<middle){
                    larr.push(arr[i]);
                }else{
                    rarr.push(arr[i]);
                }
            }
            // console.log(larr);
            // console.log(rarr);
            return quickSort(larr).concat([middle], quickSort(rarr));
        }
        // let arr1 = [1,55,30,88,99,12];
        // // console.log(quickSort(arr1));
        // //冒泡排序  O(n2) O(1)
        // function bubbleSort(arr){
        //     for(let i = 0,len = arr.length;i<len-1;i++){
        //         for(let j = 0;j<arr.length-1-i;j++){
        //             if(arr[j]>arr[j+1]){
        //                 let temp = arr[j];
        //                 arr[j] = arr[j+1];
        //                 arr[j+1] = temp;
        //             }
        //         }
        //         // console.log(arr);
        //     }
        //     return arr
        // }
        // let bubbleArr = [20,18,27,19,35,1,55];
        // // console.log(bubbleArr);
        // // console.log("冒泡排序");
        // // console.log(bubbleSort(bubbleArr));
        // //封装fn this指向特定的对象
        // function bindThisFunc(f,obj){
        //     return function(){
        //         return f.apply(obj,arguments)
        //     }
        //     // return f.bind(obj);
        // }
        // let obj = {
        //     name:"123",
        //     ageL:"18"
        // }
        // function test(){
        //     // console.log(this);
        // }
        // bindThisFunc(test,obj)();



        // function twiceBubbleSort(arr){
        //     for(let n = 0,left = 0,right = arr.length-1;left<=right;left++,right--){
        //         //第一次向左  找到最小的值
        //         for(let i = left;i<=right;i++){
        //             if(arr[left]>arr[i]){
        //                 [arr[left],arr[i]] = [arr[i],arr[left]];
        //             }
        //             // console.log('&'.repeat(50));
        //             // console.log(arr);
        //         }
        //         //第二次向右  找到最大的值
        //         for(let j = right;j>=left;j--){
        //             if(arr[right]<arr[j]){
        //                 [arr[right],arr[j]] = [arr[j],arr[right]]
        //             }
        //             // console.log('$'.repeat(50));
        //             // console.log(arr);
        //         }
        //         //一次最外侧循环  分别找到一个最小的值和最大的值 优化了冒泡排序
        //         // console.log(arr);
        //     }
        //     return arr;
        // }
        // let twiceBubbleArr = [10,6,12,34,12,56,78,99,112,45,61];
        // // console.log(twiceBubbleArr);
        // // console.log('*'.repeat(50));
        // // console.log(twiceBubbleSort(twiceBubbleArr));
        // //插入 O(n2) O(1)
        function insertSort(arr){
            for(let i = 1,n=1;i<arr.length;i++,n++){
                if(arr[i]<arr[i-1]){
                    let temp = arr[i];
                    for(var j = i-1;j>=0;j--){
                        if(arr[j]>temp){
                            arr[j+1] = arr[j];
                        }else{
                            break
                        }
                    }
                    arr[j+1] = temp;
                }
                console.log(arr);
            }
            return arr
        }
        let twiceBubbleArr1 = [10,6,12,34,12,56,78,99,112,45,61];
        // // console.log(twiceBubbleArr1);
        // // console.log('插入'.repeat(50));
        console.log(insertSort(twiceBubbleArr1));
        // //防抖 节流 闭包  匿名函数  高阶函数 
        // (
        //     function(str){
        //         var local = str;
        //         // console.log(local)
        //         function foo(){
        //             // console.log(local)
        //             return local
        //         }
        //         foo();
        //         return foo
        //     }
        // )('变量')
        // //两数之和  给定一个数组  一个目标值  从数组中找到和为目标值的元素  返回数组下标
        // //两层循环 时间复杂度为n^2
        // function getSunElementIndex(arr,sum){
        //     //循环遍历数组 第一个值是第一个元素 循环遍历其他的  如果和为目标值 返回下标 否则继续循环
        //     let res = [];
        //     for(let i = 0,len=arr.length;i<len;i++){
        //         let ele = arr[i];
        //         for(let j = i+1,len = arr.length;j<len;j++){
        //             if(arr[j] == sum - ele){
        //                 res = [i,j];
        //                 return res
        //             }
        //         }
        //     }
        //     return res
        // }
       
        // console.log(getSunElementIndex(arr,sum));
        function getSumElementIndexBySortArray(arr,sum){
            //首先将原数组进行排序 从大到小排列
            //两个指针 一个头部 一个尾部 计算两数的和  如果大于目标值 尾部指针向前  如果小于目标值 头部指针向后
            let backarr = quickSort([...arr]);
            //i作为头部指针
            let res = [];
            // for(let i = 0;i<backarr.length;i++){
            //     let j = backarr.length-1;
            //     if(backarr[i] + backarr[j] > sum){
                    
            //     }else if(backarr[i] + backarr[j] < sum){
            //         backarr.splice(i,1)
            //     }else{
            //         res = [backarr[i],backarr[j]];
            //         return res
            //     }
            // }
            let i = 0,j = backarr.length-1,k,t1,t2;
            while(i<j){
                if(backarr[i]+backarr[j] > sum){
                    j--
                }
                else if(backarr[i]+backarr[j] < sum){
                    i++
                }else{
                    t1 = backarr[i];
                    t2 = backarr[j];
                    break;
                }
            }
            //从原数组  找到对应下标的值
            // console.log(t1+'************'+t2);
            let index1 = arr.findIndex((v,i,arr)=>{
                return v == t1;
            });
            let index2 = arr.findIndex((v,i,arr)=>{
                return v == t2;
            });
            res.push(index1);
            res.push(index2);
            res.sort(function(a,b){return a>b?1:-1});
            return res;
        }
        let arr1 = [12,33,4,14,1,8,9,11,3];//[1,3,4,8,9,11]
        let sum1 = 7;
        // console.log(getSumElementIndexBySortArray(arr1,sum1));


        const removeDuplicates = function(s, k) {
            let stack = []
            for(let c of s) {
                let prev = stack.pop()
                console.log(prev);
                if(!prev || prev[0] !== c) {
                    stack.push(prev)
                    stack.push(c)
                } else if(prev.length < k-1) {
                    stack.push(prev+c)
                }
            }
            return stack.join('')
        };
        let teststr = 'abbbcccaa123'
        console.log(removeDuplicates(teststr,3));//123



        const removeDuplicates1 = function(s){
            let stack = [];
            for(let c of s){
                let prev = stack.pop();
                if(prev !== c){
                    stack.push(prev);
                    stack.push(c);
                }
            }
            return stack.join('');
        }
        console.log(removeDuplicates1(teststr));  //abc123

        let source = {
            a:{
                b:{
                    c:1
                }
            },
            e:2
        };
        var newobj = {};
        function flat(cur, key2) {
            Object.keys(cur).forEach(function(key) {
                if (typeof cur[key] != "object") {
                    if (key2) {
                        newobj[key2 + key] = cur[key]
                    } else {
                        newobj[key] = cur[key]
                    }
                } else if (typeof cur[key] == "object") {
                    if (key2) {
                        flat(cur[key], key2 + key + ".")
                    } else {
                        flat(cur[key], key + ".")
                    }
                }
            });
            return newobj
        }
        var target = flat(source);
        console.log(target);





         //排序：冒泡 插入 选择 快速
         const sortarrtest = [1,0,3,2,55,666,777,22,2,4]
        function swap(arr,i,j){
            [arr[i],arr[j]] = [arr[j],arr[i]]
        }
        function bubbleSort(arr){
            for(let i = 0;i<arr.length;i++){
                for(let j = i+1;j<arr.length;j++){
                    if(arr[i]>arr[j]){
                        // let temp = arr[i]
                        // arr[i] = arr[j]
                        // arr[j] = temp
                        swap(arr,i,j)
                    }
                }
            }
            // console.log(arr);
            return arr
        }
        //o(n^2)  o(1)
        bubbleSort(sortarrtest);
        //[0,3]
        //1
        //1,1
        function insertSort(arr){
            let preIndex = null;
            let current = null;
            for(let i = 1;i<arr.length;i++){
                let preIndex = i-1;
                let current = arr[i]
                while(preIndex>=0 && current < arr[preIndex]){
                    preIndex--
                    arr[preIndex+1] = arr[preIndex]
                }
                //不满足条件了  是前一个位置
                //preIndex  已经减了
                arr[preIndex+1] = current
                // console.log(arr);
            }
            // console.log(arr);
            return arr
        }
        //o(n^2)   o(1)
        insertSort(sortarrtest);

        function quickSort(arr){
            if (arr.length <= 1) { return arr; }
            let len = arr.length
            let middleIndex = Math.floor(arr.length/2);
            let middle = arr.splice(middleIndex, 1)[0];
            let leftarr = [];
            let rightarr = []
            // if(len<2){
            //     return arr
            // }
            for(let i = 0;i<arr.length;i++){
                if(arr[i]<middle){
                    leftarr.push(arr[i])
                }else{
                    rightarr.push(arr[i])
                }
            }
            return quickSort(leftarr).concat(middle,quickSort(rightarr))
        }

        let sss = [1,55,30,88,99,12]
        let arrdddd = quickSort(sortarrtest)
        console.log(arrdddd);

        //选择最小值  交换位置
        function selectSort(arr){
            let len = arr.length
            let minIndex,temp;
            for(let i = 0;i<len-1;i++){
                minIndex = i;
                for(let j = i+1;j<len-1;j++){
                    if(arr[j]<arr[i]){
                        minIndex = j
                    }
                }
                // temp = arr[i]
                // arr[i] = arr[minIndex]
                // arr[minIndex] = temp
                swap(arr,i,minIndex)
            }
            console.log(arr)
            return arr
        }

        selectSort('selectSort');
        selectSort(sortarrtest);


        //不断的分割成小块  最后拿出来
        function mergeSort111(arr){
            let len = arr.length
            if(len<2){
                return arr
            }
            let middle = Math.floor(len/2)
            let left = arr.slice(0,middle)
            let right = arr.slice(middle)
            return merge111(mergeSort111(left),mergeSort111(right))
        }

        function merge111(left,right){
            let res = [];
            while(left.length>0 && right.length>0){
                if(left[0]<=right[0]){
                    res.push(left.shift())
                }else{
                    res.push(right.shift())
                }
            }
            while(left.length){
                res.push(left.shift())
            }
            while(right.length){
                res.push(right.shift())
            }
            return res
        }



        let mergesss = mergeSort111(sortarrtest);
        console.log('mergeSort')
        console.log(mergesss)

        // let testsplice = [1,2,3,4,5]
        // // let testsplicell = testsplice.splice(0,3)
        // let testsplicell22 = testsplice.slice(0,3)
        // console.log(testsplice);
        // // console.log(testsplicell);
        // console.log(testsplicell22);

        //shellsort


    </script>
</body>
</html>